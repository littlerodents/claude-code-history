# Claude Code History 仓库配置

## 核心规则：对话结束时主动询问保存

### ⚠️ 重要：每次对话结束时，我必须主动询问

当检测到以下情况时，**我必须主动问**：
- 完成了一个项目或任务
- 对话即将结束
- 产生了有价值的代码/文档/配置

### 询问模板

```
---
📦 **是否需要保存本次对话到 claude-code-history？**

本次完成了：{简要描述}

存档将包含：
- PROJECT-SUMMARY.md (对话总结)
- {相关文件列表}

回复 "是/yes/保存" 确认，"否/no" 跳过。
---
```

## 保存流程

用户确认后：
1. 创建 `{YYYY-MM-DD}/{项目名}/` 目录
2. 生成 PROJECT-SUMMARY.md
3. 复制相关文件
4. Git commit

## PROJECT-SUMMARY.md 模板

```markdown
# {项目标题}

## 项目概述
- 做了什么
- 完成状态

## 交付物
- 文件列表和用途

## 核心内容
- 关键技术点
- 重要决策

## 如何使用
- 步骤和命令

## 时间轴
- 关键节点
```

## 仓库结构

```
claude-code-history/
├── .claude/CLAUDE.md          # 本配置
├── README.md                  # 仓库说明
├── 2026-01-26/项目A/
├── 2026-01-29/项目B/
└── 2026-MM-DD/项目N/
```

---

> **记住：是我主动问，不是等用户说！**
